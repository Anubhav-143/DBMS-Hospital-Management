<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Hospital Management System{% endblock %}</title>
    <style>
        /* ===== Reset & Base ===== */
        *, *::before, *::after { box-sizing: border-box; }
        body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; font-size: 15px; line-height: 1.5; color: #212529; background: #f0f2f5; }
        a { color: #1a237e; text-decoration: none; }
        a:hover { text-decoration: underline; color: #0d1a6e; }
        h2, h5 { margin: 0; }
        ul { list-style: none; margin: 0; padding: 0; }
        table { border-collapse: collapse; width: 100%; }

        /* ===== Layout ===== */
        .layout { display: flex; min-height: 100vh; }

        /* ===== Sidebar ===== */
        .sidebar { width: 220px; min-width: 220px; background: #1a237e; display: flex; flex-direction: column; }
        .sidebar-brand { color: #fff; font-size: 1.2rem; font-weight: 700; padding: 20px; border-bottom: 1px solid rgba(255,255,255,0.15); display: flex; align-items: center; gap: 8px; }
        .sidebar-brand svg { width: 22px; height: 22px; fill: white; }
        .sidebar nav { padding: 10px 0; flex: 1; }
        .sidebar .nav-link { display: flex; align-items: center; gap: 10px; padding: 10px 20px; color: rgba(255,255,255,0.78); font-size: 0.94rem; transition: background 0.15s, color 0.15s; text-decoration: none; }
        .sidebar .nav-link:hover, .sidebar .nav-link.active { background: rgba(255,255,255,0.12); color: #fff; text-decoration: none; }
        .sidebar .nav-link svg { width: 18px; height: 18px; fill: currentColor; flex-shrink: 0; }

        /* ===== Main Content ===== */
        .main { flex: 1; padding: 24px; overflow-x: hidden; min-width: 0; }

        /* ===== Topbar (mobile) ===== */
        .topbar { display: none; background: #1a237e; padding: 12px 16px; align-items: center; justify-content: space-between; }
        .topbar .brand { color: #fff; font-weight: 700; font-size: 1.1rem; }
        .topbar-toggle { background: none; border: 1px solid rgba(255,255,255,0.4); color: #fff; padding: 4px 10px; cursor: pointer; border-radius: 4px; font-size: 1.1rem; }
        .mobile-nav { display: none; background: #1e2d99; }
        .mobile-nav a { display: block; padding: 10px 20px; color: rgba(255,255,255,0.85); text-decoration: none; font-size: 0.93rem; }
        .mobile-nav a:hover { background: rgba(255,255,255,0.08); }
        .mobile-nav.open { display: block; }

        /* ===== Cards ===== */
        .card { background: #fff; border-radius: 10px; border: 1px solid #e3e6f0; box-shadow: 0 1px 6px rgba(0,0,0,0.06); }
        .card-header { padding: 14px 18px; border-bottom: 1px solid #e3e6f0; background: #fff; border-radius: 10px 10px 0 0; display: flex; align-items: center; justify-content: space-between; }
        .card-body { padding: 18px; }
        .card-footer { padding: 10px 18px; border-top: 1px solid rgba(255,255,255,0.15); background: transparent; }

        /* ===== Stat Cards ===== */
        .stat-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(210px, 1fr)); gap: 16px; margin-bottom: 24px; }
        .stat-card { border-radius: 12px; color: #fff; padding: 18px 20px; box-shadow: 0 3px 12px rgba(0,0,0,0.12); }
        .stat-card .stat-num { font-size: 2.2rem; font-weight: 700; line-height: 1.1; }
        .stat-card .stat-label { font-size: 0.85rem; opacity: 0.82; margin-top: 2px; }
        .stat-card .stat-link { display: inline-block; margin-top: 10px; color: rgba(255,255,255,0.88); font-size: 0.82rem; text-decoration: none; border-top: 1px solid rgba(255,255,255,0.2); padding-top: 8px; width: 100%; }
        .stat-card .stat-link:hover { color: #fff; text-decoration: underline; }

        /* ===== Tables ===== */
        .table-responsive { overflow-x: auto; }
        .table th { background: #f0f4ff; font-weight: 600; font-size: 0.84rem; color: #4a5568; text-transform: uppercase; letter-spacing: 0.03em; padding: 10px 14px; border-bottom: 2px solid #dee2e6; }
        .table td { padding: 10px 14px; border-bottom: 1px solid #f0f0f0; vertical-align: middle; }
        .table-hover tbody tr:hover { background: #f8f9ff; }
        .table td:last-child, .table th:last-child { white-space: nowrap; }

        /* ===== Buttons ===== */
        .btn { display: inline-flex; align-items: center; gap: 5px; padding: 7px 16px; font-size: 0.875rem; font-weight: 500; border-radius: 6px; border: 1px solid transparent; cursor: pointer; text-decoration: none; transition: all 0.15s; white-space: nowrap; }
        .btn:hover { text-decoration: none; filter: brightness(0.92); }
        .btn-sm { padding: 4px 10px; font-size: 0.8rem; }
        .btn-primary { background: #1a237e; color: #fff; border-color: #1a237e; }
        .btn-success { background: #2e7d32; color: #fff; border-color: #2e7d32; }
        .btn-danger { background: #c62828; color: #fff; border-color: #c62828; }
        .btn-secondary { background: #6c757d; color: #fff; border-color: #6c757d; }
        .btn-warning { background: #f57f17; color: #fff; border-color: #f57f17; }
        .btn-outline-primary { background: transparent; color: #1a237e; border-color: #1a237e; }
        .btn-outline-secondary { background: transparent; color: #6c757d; border-color: #6c757d; }
        .btn-outline-danger { background: transparent; color: #c62828; border-color: #c62828; }
        .btn-outline-success { background: transparent; color: #2e7d32; border-color: #2e7d32; }
        .btn-outline-primary:hover { background: #1a237e; color: #fff; }
        .btn-outline-secondary:hover { background: #6c757d; color: #fff; }
        .btn-outline-danger:hover { background: #c62828; color: #fff; }
        .btn-outline-success:hover { background: #2e7d32; color: #fff; }

        /* ===== Badges ===== */
        .badge { display: inline-block; padding: 3px 9px; font-size: 0.76rem; font-weight: 600; border-radius: 20px; color: #fff; white-space: nowrap; }
        .bg-info { background: #0288d1; }
        .bg-success { background: #2e7d32; }
        .bg-danger { background: #c62828; }
        .bg-secondary { background: #6c757d; }
        .bg-warning { background: #f57f17; color: #fff; }
        .bg-primary { background: #1a237e; }
        .text-dark { color: #212529; }

        /* ===== Alerts ===== */
        .alert { padding: 12px 16px; border-radius: 8px; margin-bottom: 16px; border: 1px solid transparent; display: flex; align-items: flex-start; justify-content: space-between; gap: 10px; }
        .alert-success { background: #d4edda; border-color: #c3e6cb; color: #155724; }
        .alert-danger, .alert-error { background: #f8d7da; border-color: #f5c6cb; color: #721c24; }
        .alert-info { background: #d1ecf1; border-color: #bee5eb; color: #0c5460; }
        .alert-warning { background: #fff3cd; border-color: #ffeeba; color: #856404; }
        .alert-close { background: none; border: none; cursor: pointer; font-size: 1.1rem; color: inherit; opacity: 0.7; padding: 0; line-height: 1; }
        .alert-close:hover { opacity: 1; }

        /* ===== Forms ===== */
        .form-label { display: block; font-weight: 600; font-size: 0.875rem; margin-bottom: 5px; color: #374151; }
        .form-control, .form-select { display: block; width: 100%; padding: 8px 12px; font-size: 0.9rem; line-height: 1.5; color: #212529; background: #fff; border: 1px solid #ced4da; border-radius: 6px; transition: border-color 0.15s, box-shadow 0.15s; }
        .form-control:focus, .form-select:focus { border-color: #1a237e; outline: 0; box-shadow: 0 0 0 3px rgba(26,35,126,0.12); }
        textarea.form-control { resize: vertical; min-height: 80px; }
        .form-text { font-size: 0.8rem; color: #6c757d; margin-top: 4px; }
        .is-invalid { border-color: #dc3545 !important; }
        .invalid-feedback { color: #dc3545; font-size: 0.82rem; margin-top: 4px; }
        .form-check { display: flex; align-items: center; gap: 8px; margin-top: 6px; }
        .form-check-input { width: 16px; height: 16px; cursor: pointer; accent-color: #1a237e; }
        .form-check-label { font-size: 0.9rem; }

        /* ===== Page header ===== */
        .page-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px; flex-wrap: wrap; gap: 10px; }
        .page-header h2 { font-size: 1.45rem; font-weight: 700; color: #1a237e; display: flex; align-items: center; gap: 8px; }
        .page-header h2 svg { width: 24px; height: 24px; fill: currentColor; }

        /* ===== Pagination ===== */
        .pagination { display: flex; gap: 4px; justify-content: center; margin-top: 16px; flex-wrap: wrap; }
        .page-item .page-link { display: inline-block; padding: 6px 12px; font-size: 0.875rem; border: 1px solid #dee2e6; border-radius: 6px; color: #1a237e; background: #fff; text-decoration: none; }
        .page-item.disabled .page-link { color: #6c757d; pointer-events: none; }
        .page-item .page-link:hover { background: #f0f4ff; }

        /* ===== Two-column form grid ===== */
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
        .form-grid .full-width { grid-column: 1 / -1; }

        /* ===== Dashboard grid ===== */
        .dash-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }

        /* ===== Utility ===== */
        .text-muted { color: #6c757d; font-size: 0.875rem; }
        .text-primary { color: #1a237e !important; }
        .text-danger { color: #dc3545; }
        .text-success { color: #2e7d32; }
        .text-center { text-align: center; }
        .text-white { color: #fff; }
        .text-dark { color: #212529 !important; }
        .text-decoration-none { text-decoration: none; }
        .fw-bold { font-weight: 700; }
        .fw-semibold { font-weight: 600; }
        .small { font-size: 0.85rem; }
        .fs-5 { font-size: 1.1rem; }
        .mt-2 { margin-top: 8px; }
        .mt-3 { margin-top: 12px; }
        .mt-4 { margin-top: 16px; }
        .mb-0 { margin-bottom: 0; }
        .mb-3 { margin-bottom: 12px; }
        .mb-4 { margin-bottom: 20px; }
        .py-3 { padding-top: 12px; padding-bottom: 12px; }
        .py-4 { padding-top: 16px; padding-bottom: 16px; }
        .p-0 { padding: 0 !important; }
        .ms-2 { margin-left: 8px; }
        .me-2 { margin-right: 8px; }
        .me-3 { margin-right: 12px; }
        .max-700 { max-width: 700px; }
        /* Bootstrap compat flex utilities */
        .d-flex { display: flex; }
        .flex-column { flex-direction: column; }
        .justify-content-between { justify-content: space-between; }
        .justify-content-center { justify-content: center; }
        .align-items-center { align-items: center; }
        .shadow-sm { box-shadow: 0 1px 6px rgba(0,0,0,0.06); }
        .border-danger { border-color: #dc3545 !important; }
        /* Bootstrap compat grid (simplified) */
        .row { display: flex; flex-wrap: wrap; gap: 16px; }
        .col-md-6 { flex: 1 1 calc(50% - 16px); min-width: 200px; }
        .col-md-12 { flex: 0 0 100%; }
        .g-3 { gap: 12px; }
        /* Bootstrap icons fallback - hide empty i tags */
        i.bi::before { content: ''; }
        /* Table borderless */
        .table-borderless td, .table-borderless th { border: none; padding: 6px 10px; }

        /* ===== Responsive ===== */
        @media (max-width: 768px) {
            .sidebar { display: none; }
            .topbar { display: flex; }
            .dash-grid { grid-template-columns: 1fr; }
            .form-grid { grid-template-columns: 1fr; }
            .page-header { gap: 8px; }
            .main { padding: 16px; }
        }
        @media (min-width: 769px) {
            .topbar { display: none; }
        }
    </style>
</head>
<body>
<!-- Mobile topbar -->
<div class="topbar">
    <span class="brand">
        <svg viewBox="0 0 24 24" style="width:20px;height:20px;fill:white;display:inline;vertical-align:middle;margin-right:6px"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14H8v-2h4v2zm0-4H8v-2h4v2zm4 4h-2V7h-2v10H8V7H6V5h12v2h-2v10z"/></svg>
        HMS
    </span>
    <button class="topbar-toggle" onclick="document.getElementById('mobileNav').classList.toggle('open')">&#9776;</button>
</div>
<div class="mobile-nav" id="mobileNav">
    <a href="{% url 'dashboard' %}">&#9783; Dashboard</a>
    <a href="{% url 'patient-list' %}">&#128101; Patients</a>
    <a href="{% url 'doctor-list' %}">&#129657; Doctors</a>
    <a href="{% url 'appointment-list' %}">&#128197; Appointments</a>
    <a href="{% url 'treatment-list' %}">&#128203; Treatments</a>
    <a href="{% url 'bill-list' %}">&#128179; Billing</a>
</div>

<div class="layout">
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-brand">
            <svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 3c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6zm7 13H5v-.23c0-.62.28-1.2.76-1.58C7.47 15.82 9.64 15 12 15s4.53.82 6.24 2.19c.48.38.76.97.76 1.58V19z"/></svg>
            HMS
        </div>
        <nav>
            <a class="nav-link {% block nav_dashboard %}{% endblock %}" href="{% url 'dashboard' %}">
                <svg viewBox="0 0 24 24"><path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/></svg>
                Dashboard
            </a>
            <a class="nav-link {% block nav_patients %}{% endblock %}" href="{% url 'patient-list' %}">
                <svg viewBox="0 0 24 24"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>
                Patients
            </a>
            <a class="nav-link {% block nav_doctors %}{% endblock %}" href="{% url 'doctor-list' %}">
                <svg viewBox="0 0 24 24"><path d="M20 6h-2.18c.07-.44.18-.88.18-1.36C18 2.05 15.96 0 13.36 0c-1.31 0-2.48.52-3.36 1.36C9.12.52 7.95 0 6.64 0 4.04 0 2 2.05 2 4.64c0 .48.11.92.18 1.36H0v14a2 2 0 002 2h8.37c-.21-.62-.37-1.3-.37-2 0-3.31 2.69-6 6-6s6 2.69 6 6c0 .7-.16 1.38-.37 2H22a2 2 0 002-2V6h-4zm-7.64-4c1.29 0 2.28 1.02 2.28 2.28 0 1.37-1.73 3.44-2.28 4.05-.55-.61-2.28-2.68-2.28-4.05C10.08 3.02 11.07 2 12.36 2zm-5.72 0c1.29 0 2.28 1.02 2.28 2.28 0 1.37-1.73 3.44-2.28 4.05-.55-.61-2.28-2.68-2.28-4.05C4.36 3.02 5.35 2 6.64 2zM16 21l-4-4h3v-3h2v3h3l-4 4z"/></svg>
                Doctors
            </a>
            <a class="nav-link {% block nav_appointments %}{% endblock %}" href="{% url 'appointment-list' %}">
                <svg viewBox="0 0 24 24"><path d="M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"/></svg>
                Appointments
            </a>
            <a class="nav-link {% block nav_treatments %}{% endblock %}" href="{% url 'treatment-list' %}">
                <svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 3c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6zm7 13H5v-.23c0-.62.28-1.2.76-1.58C7.47 15.82 9.64 15 12 15s4.53.82 6.24 2.19c.48.38.76.97.76 1.58V19z"/></svg>
                Treatments
            </a>
            <a class="nav-link {% block nav_bills %}{% endblock %}" href="{% url 'bill-list' %}">
                <svg viewBox="0 0 24 24"><path d="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"/></svg>
                Billing
            </a>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="main">
        {% if messages %}
        <div class="mb-3">
            {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">
                <span>{{ message }}</span>
                <button class="alert-close" onclick="this.parentElement.remove()">&#10005;</button>
            </div>
            {% endfor %}
        </div>
        {% endif %}

        {% block content %}{% endblock %}
    </main>
</div>
</body>
</html>
